<div class="container">
  <div class="columns is-multiline is-centered">
    <div class="column is-half">
      <div class="card">
        <header class="card-header">
          <p class="card-header-title">
            Recipe by: <%= link_to " #{meal_recipe.user.first_name}", user_path(meal_recipe.user.id) %>
          </p>
        </header>

        <div class="card-content">
          <p class="title">
            <%= meal_recipe.title %>
          </p>
          <p class="subtitle">
            Description:<br>
            <em><%= meal_recipe.description %></em>
          </p>

          <div class="content">
            <p class="subtitle">
              Instructions:
            </p>
            <ol type="1">
              <% meal_recipe.recipe_instructions.each do |instruction| %>
                <li>
                  <%= instruction.instruction %>
                  <% if logged_in? && same_as_current_user?(meal_recipe.user) %>
                    <%= link_to edit_meal_recipe_recipe_instruction_path(meal_recipe, instruction) do %>
                      <span class="icon is-small"><i class="fas fa-pen-square"></i></span>
                    <% end %>
                    <%= link_to meal_recipe_recipe_instruction_path(meal_recipe, instruction), data: {
                                    confirm: "Are you sure you want to delete this recipe?" }, method: :delete do %>
                                      <span class="icon is-small"><i class="fas fa-trash-alt"></i></span>
                                    <% end %><br>
                  <% end %>
                </li>
              <% end %>
              <% if logged_in? && same_as_current_user?(meal_recipe.user) %>
                <%= link_to "Add instruction", new_meal_recipe_recipe_instruction_path(meal_recipe, meal_recipe.recipe_instructions)%>
              <% end %>
            </ol>
          </div>

          <div class="content">
            <p class="subtitle">
              Ingredients:
            </p>
            <ul>
              <% meal_recipe.recipe_ingredients.each do |ingredient| %>
                <li>
                  <%= ingredient.ingredient %>
                  <% if logged_in? && same_as_current_user?(meal_recipe.user) %>
                    <%= link_to edit_meal_recipe_recipe_ingredient_path(meal_recipe, ingredient) do %>
                      <span class="icon is-small"><i class="fas fa-pen-square"></i></span>
                    <% end %>
                    <%= link_to meal_recipe_recipe_ingredient_path(meal_recipe, ingredient), data: {
                                    confirm: "Are you sure you want to delete this recipe?" }, method: :delete do %>
                                      <span class="icon is-small"><i class="fas fa-trash-alt"></i></span>
                                    <% end %>
                  <% end %>
                </li>
              <% end %>
                <% if logged_in? && same_as_current_user?(meal_recipe.user) %>
                  <%= link_to "Add ingredient", new_meal_recipe_recipe_ingredient_path(meal_recipe, meal_recipe.recipe_ingredients)%>
                <% end %>
            </ul>
          </div>
        </div>

        <footer class="card-footer">
          <%= link_to 'Home', meal_recipes_path, class: "card-footer-item" %>
          <% if logged_in? && same_as_current_user?(meal_recipe.user) %>
            <%= link_to 'Edit', edit_meal_recipe_path(meal_recipe[:id]), class: "card-footer-item" %>
            <%= link_to 'Delete', meal_recipe_path(meal_recipe[:id]), class: "card-footer-item", data: {
                                                    confirm: "Are you sure you want to delete this recipe?"
                                                    }, method: :delete %>
          <% end %>
        </footer>
      </div>
    </div>
  </div>
</div>
